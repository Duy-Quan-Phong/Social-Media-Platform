<div th:fragment="content">
    <!-- Avatar Section -->
    <div class="avatar-section">
        <div class="avatar-wrapper" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
            <sec:authorize access="isAuthenticated()">
                <img th:if="${#authentication.principal.avatarUrl != null and !#strings.isEmpty(#authentication.principal.avatarUrl)}"
                     th:src="@{${#authentication.principal.avatarUrl}}"
                     alt="Avatar" class="profile-avatar avatar-preview"/>
                <img th:unless="${#authentication.principal.avatarUrl != null and !#strings.isEmpty(#authentication.principal.avatarUrl)}"
                     th:src="@{/images/default-avatar.jpg}"
                     alt="Avatar" class="profile-avatar avatar-preview"/>
            </sec:authorize>

            <div class="avatar-overlay">
                <i class="fas fa-camera edit-icon"></i>
            </div>

            <input type="file" id="avatarFile" name="avatarFile" accept="image/*"
                   onchange="showPreview(event);" class="avatar-file-input">
        </div>
        <div class="avatar-help">
            <i class="fas fa-info-circle"></i>
            Nhấp để thay đổi ảnh đại diện
        </div>
    </div>

    <!-- Basic Info -->
    <div class="form-row">
        <div class="form-group">
            <label>Tên người dùng</label>
            <input type="text" class="form-control" th:field="*{username}" readonly>
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" th:field="*{email}"
                   th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''">
            <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>Họ</label>
            <input type="text" class="form-control" th:field="*{lasttName}"
                   th:classappend="${#fields.hasErrors('lasttName')} ? 'is-invalid' : ''">
            <div class="invalid-feedback" th:if="${#fields.hasErrors('lasttName')}" th:errors="*{lasttName}"></div>
        </div>
        <div class="form-group">
            <label>Tên</label>
            <input type="text" class="form-control" th:field="*{firstName}"
                   th:classappend="${#fields.hasErrors('firstName')} ? 'is-invalid' : ''">
            <div class="invalid-feedback" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
        </div>
    </div>

    <div class="form-group">
        <label>Số điện thoại</label>
        <input type="text" class="form-control" th:field="*{phone}"
               th:classappend="${#fields.hasErrors('phone')} ? 'is-invalid' : ''">
        <div class="invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
    </div>

    <div class="form-group">
        <label>Giới thiệu bản thân</label>
        <textarea class="form-control" th:field="*{bio}" rows="4"
                  th:classappend="${#fields.hasErrors('bio')} ? 'is-invalid' : ''"
                  placeholder="Viết vài dòng về bản thân bạn..."></textarea>
        <div class="invalid-feedback" th:if="${#fields.hasErrors('bio')}" th:errors="*{bio}"></div>
    </div>
</div>